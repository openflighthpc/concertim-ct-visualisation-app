<% set_title "compute unitDeposits for team #{@team.name}" -%>


<% if current_user.can?(:create, ComputeUnitDeposit.new(team: @team)) %>
  <%= link_to "+ New Compute Unit Deposit", new_team_compute_unit_deposit_path(@team), class: "button" %>
<% end %>

<%= render_resource_table_for @deposits, searchable: false do |t| %>
  <% t.on_empty_collection do %>
    <% capture do %>
      No compute unit deposits have been found.
    <% end %>
  <% end %>

  <% t.attribute_column :id, sortable: true %>
  <% t.attribute_column :created_at, sortable: true %>
  <% t.attribute_column :date, sortable: true %>
  <% t.custom_column "Compute Units", sortable: true, db_column: :amount do |deposit| %>
    <% number_with_delimiter(deposit.amount, delimiter: ",") %>
  <% end %>

  <% t.actions_column do |actions, deposit| %>
    <% actions.add_with_auth can: :edit, on: deposit, text: 'Edit', path: edit_compute_unit_deposit_path(deposit) %>
    <% actions.add_with_auth(can: :destroy, on: deposit,
                             text: 'Delete',
                             path: compute_unit_deposit_path(deposit),
                             method: 'delete',
                             data: {confirm:  "Are you sure you want to delete this deposit? It cannot be undone."}
                            )
    %>
  <% end %>
<% end %>
